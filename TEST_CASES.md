# Client test cases

- ✅ - покрыто тестом
- ❗ - тест кейс описан, но функциональность пока не реализована

## Layout

| Done | Test case                                                                                                        |
| ---- | ---------------------------------------------------------------------------------------------------------------- |
| ✅   | Если выставлена ошибка сети `{ networkError: { message: 'error' } }`, на странице есть системное сообщение       |
| ✅   | На роуте `/` в хэдере есть кнопки запуска билда и открытия настроек                                              |
| ✅   | На роуте `/settings` в хэдере нет кнопок                                                                         |
| ✅   | На роуте `/build/:buildId` в хэдере есть кнопки перезапуска и открытия настроек                                  |
|      |                                                                                                                  |
| ✅   | По клику на кнопку Settings происходит переход на страницу `/settings`                                           |
| ✅   | При клике на кнопку Rebuild отправляется запрос на постановку билда в очередь с данными текущего открытого билда |
| ✅   | При успешном ребилде происходит редирект на страницу нового билда `/build/:newId`                                |

## Builds `/`

| Done | Test case                                                                                           |
| ---- | --------------------------------------------------------------------------------------------------- |
| ✅   | При переходе на этот роут открывается страница BuildList                                            |
|      |                                                                                                     |
| ✅   | Если настройки не заданы, на странице есть системное сообщение                                      |
| ✅   | По клику на кнопку Open settings происходит переход на страницу `/settings`                         |
|      |                                                                                                     |
| ✅   | При открытии страницы отправляются запросы на получение настроек и списка билдов                    |
| ✅   | Если выставлен `pending: { loading: true, fullscreen: true }`, на странице есть системное сообщение |
|      |                                                                                                     |
| ✅   | При клике на кнопку Run build открывается модальное окно                                            |
|      |                                                                                                     |
| ✅   | Когда массив билдов есть в сторе, они отрендерены в список на странице                              |
|      |                                                                                                     |
| ❗   | При нажатии на кнопку Show more отправляется запрос на получение билдов                             |
| ❗   | При получении новых билдов они должны добавиться в список билдов на странице                        |

### Run build modal

| Done | Test case                                                                                                              |
| ---- | ---------------------------------------------------------------------------------------------------------------------- |
| ✅   | Пока инпут в модальном окне пуст, кнопка запуска билда недоступна                                                      |
| ✅   | Пока у запроса на запуск билда статус `pending: { loading: true, fullscreen: false }`, обе кнопки в модалке недоступны |
|      | При успешном завершении запроса Run build происходит редирект на страницу нового билда                                 |

## Settings `/settings`

| Done | Test case                                                                                                    |
| ---- | ------------------------------------------------------------------------------------------------------------ |
| ✅   | При переходе на этот роут открывается страница Settings                                                      |
|      |                                                                                                              |
|      | При открытии страницы в полях отображаются ранее сохраненные настройки                                       |
|      |                                                                                                              |
| ❗   | Поле Repository обязательное                                                                                 |
| ❗   | Поле build command обязательное                                                                              |
| ❗   | Кнопка отправки настроек недоступна, если обязательные поля пустые                                           |
|      | В инпут для интервала нельзя ввести ничего кроме чисел длиной до 3-х символов                                |
|      |                                                                                                              |
|      | При клике на кнопку Save отправляется запрос на сохранение настроек с данными формы                          |
|      | ?Пока у запроса на сохранение настроек статус `pending: { loading: true, fullscreen: ? }`, кнопки недоступны |
|      | Если запрос на сохранение настроек завершился ошибкой, на странице есть сообщение                            |
|      |                                                                                                              |
|      | После успешного завершения запроса на сохранение юзера редиректит на роут /                                  |
| ✅   | Кнопка Cancel редиректит на роут /                                                                           |

## Build details `/build/:buildId`

| Done | Test case                                                                              |
| ---- | -------------------------------------------------------------------------------------- |
| ✅   | При переходе на этот роут открывается страница BuildDetails                            |
|      |                                                                                        |
| ✅   | При открытии страницы отправляется запрос на получение buildDetails                    |
| ✅   | При открытии страницы отправляется запрос на получение buildLog                        |
| ✅   | Если выставлен `pending: { loading: true, fullscreen: true }`, на странице есть лоадер |
|      |                                                                                        |
| ✅   | Если в сторе лежат детали билда, на странице есть соответствующий компонент            |
| ✅   | Если в сторе лежат логи билда, на странице есть соответствующий компонент              |
|      |                                                                                        |
| ❗   | Если настройки не заданы, на странице есть системное сообщение                         |
|      |                                                                                        |
| ❗   | В хэдере название репозитория — ссылка на роут /                                       |

## Build

| Done | Test case                                                |
| ---- | -------------------------------------------------------- |
|      | Отображаются необходимые поля билда в статусе Waiting:   |
|      | Отображаются необходимые поля билда в статусе Cancelled: |
|      | Отображаются необходимые поля билда в статусе Finished:  |

## Вопросы

1. У меня в приложении есть несколько системных сообщений:

- О загрузке
- Об ошибке сети

Я тестирую их так: помещаю в стор данные, при которых эти сообщения могут отразиться.
Например

```json
{
  "pending": {
    "loading": true,
    "fullscreen": true
  }
}
```

Меня всё не покидает сомнение, что это "тестирование деталей реализации".
